{
  "tech_stack": ["PHP", "Vanilla JS", "MariaDB", "XAMPP"],
  "features": [
    {
      "name": "Create Return",
      "description": "Endpoint to initiate a sales return. Handles full, partial, and exchange types. Processes inventory restock and financial refunds for admin roles.",
      "files": ["api/create_return.php", "api/helper/return_functions.php"],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Create Return API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/create_return.php": {
            "post": {
              "summary": "Create a new return",
              "requestBody": {
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "invoice_id": { "type": "integer" },
                        "customer_id": { "type": "integer" },
                        "return_type": {
                          "type": "string",
                          "enum": ["full", "partial", "exchange"]
                        },
                        "refund_preference": {
                          "type": "string",
                          "enum": [
                            "cash",
                            "wallet",
                            "credit_adjustment",
                            "auto"
                          ]
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "invoice_item_id": { "type": "integer" },
                              "return_qty": { "type": "number" },
                              "unit_price_after_discount": { "type": "number" },
                              "product_id": { "type": "integer" }
                            }
                          }
                        },
                        "reason": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Success message or error"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Approve Return",
      "description": "Core function to process pending returns, update inventory (reverse FIFO), and handle financial adjustments (refunds, wallet, balance).",
      "files": ["api/helper/return_functions.php"],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Approve Return Logic",
          "version": "1.0.0"
        }
      }
    }
  ]
}
